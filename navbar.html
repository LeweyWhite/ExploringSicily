<!DOCTYPE html>
<head> 
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="stylesNav.css">
    <script src="scriptNav.js"></script>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
</head>

<body>

<aside>
    <div class="mySidebar" id="Sidebar">
        <div class="sidebar-header">
            <h2>Menu</h2>
        </div>
        <ul class="sidebar-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="CultAgrigento.html">Agrigento</a></li>
            <li><a href="CultCatania.html">Catania</a></li>
            <li><a href="CultMessina.html">Messina</a></li>
            <li><a href="CultPalermo.html">Palermo</a></li>
            <li><a href="CultRagusa.html">Ragusa</a></li>
            <li><a href="CultSiracusa.html">Siracusa</a></li>
            <li><a href="CultTrapani.html">Trapani</a></li>
        </ul>
    </div>
</aside>




<nav class="navbar"> <!-- Barra di navigazione -->
    <div class="flexContainerNav"> <!-- Contenitore flessibile per la barra di navigazione -->
        <div class="nav-icon"> <!-- Icona del menu hamburger -->
            <img id="menu-toggle" src="img/hamburger.png" style="height: 64px; padding-left: 10px; cursor: pointer;"> <!-- Icona del menu hamburger -->
        </div> 

        <div class="nav-logo">
            <img src="img/logo.png"  style="height: 100px; width: 100px;">
        </div>
        <div style="flex-grow: 1; text-align: right; color: white;">
            <h1 id="usernameUtente">welcome!</h1>
        </div>


        <div class="nav-icon">      
            <img src="img/user.png" style="height: 64px; cursor: pointer;" onclick="window.location.href='login.html'">
        </div>
    </div>
</nav>







</body>



<script>

const ip = "http://127.0.0.1:5001/";

async function getUserName() {
    try {
        const response = await fetch(ip + 'api/get_visited_places_count', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        const data = await response.json();
        const username = data.username; 
     
        document.getElementById('usernameUtente').textContent =  username;
        console.log('Username:', username);  
    } catch (error) {
        console.error('Errore nel recupero dati utente:', error);
    }
}
getUserName(); // <-- CHIAMA LA FUNZIONE QUI
 
    
</script>